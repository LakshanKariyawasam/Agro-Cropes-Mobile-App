{"version":3,"sources":["../../src/pages/single/single.module.ts","../../src/providers/cart/cart.ts","../../src/pages/single/single.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SinglePage } from './single';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SinglePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SinglePage),\r\n  ],\r\n})\r\nexport class SinglePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/single/single.module.ts","import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\n\r\nconst CART_KEY = 'cartItems';\r\n\r\n@Injectable()\r\nexport class CartProvider {\r\n\r\n  constructor(public storage: Storage) {\r\n\r\n  }\r\n\r\n  addToCart(product) {\r\n    return this.getCartItems().then(result => {\r\n      if (result) {\r\n        if (!this.containsObject(product, result)) {\r\n          result.push(product);\r\n          return this.storage.set(CART_KEY, result);\r\n        } else {\r\n          let index = result.findIndex(x => x.product_id == product.product_id);\r\n          let prevQuantity = parseInt(result[index].count);\r\n          product.count = (prevQuantity + product.count);\r\n          let currentPrice = (parseInt(product.totalPrice) * product.count);\r\n          product.totalPrice =currentPrice;\r\n           result.splice(index, 1);\r\n          result.push(product);\r\n          return this.storage.set(CART_KEY, result);\r\n        }\r\n\r\n      } else {\r\n        return this.storage.set(CART_KEY, [product]);\r\n      }\r\n    })\r\n  }\r\n\r\n  removeFromCart(product) {\r\n    return this.getCartItems().then(result => {\r\n      if (result) {\r\n        var productIndex = result.indexOf(product);\r\n        result.splice(productIndex, 1);\r\n        return this.storage.set(CART_KEY, result);\r\n      }\r\n    })\r\n  }\r\n\r\n  removeAllCartItems() {\r\n    return this.storage.remove(CART_KEY).then(res => {\r\n      return res;\r\n    });\r\n  }\r\n\r\n\r\n  containsObject(obj, list): boolean {\r\n    if (!list.length) {\r\n      return false;\r\n    }\r\n\r\n    if (obj == null) {\r\n      return false;\r\n    }\r\n    var i;\r\n    for (i = 0; i < list.length; i++) {\r\n      if (list[i].product_id == obj.product_id) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n\r\n  getCartItems() {\r\n    return this.storage.get(CART_KEY);\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/cart/cart.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\r\n//import { Storage } from '@ionic/storage';\r\nimport { CartProvider } from '../../providers/cart/cart';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-single',\r\n  templateUrl: 'single.html',\r\n})\r\nexport class SinglePage {\r\n  selectProduct: any;\r\n  productCount: number = 1;\r\n  cartItems: any[];\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n    private cartService: CartProvider, public toastCtrl: ToastController) {\r\n    if (this.navParams.get(\"product\")) {\r\n      window.localStorage.setItem('selectedProduct', JSON.stringify(this.navParams.get(\"product\")));\r\n    }\r\n\r\n\r\n  }\r\n  ionViewDidEnter() {\r\n    this.getSingleProduct();\r\n  }\r\n\r\n\r\n  getSingleProduct() {\r\n    if (window.localStorage.getItem('selectedProduct') != 'undefined') {\r\n      this.selectProduct = JSON.parse(window.localStorage.getItem('selectedProduct'))\r\n    }\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.selectProduct = this.navParams.get(\"product\");\r\n    this.cartService.getCartItems().then((val) => {\r\n      this.cartItems = val;\r\n    })\r\n\r\n  }\r\n\r\n  decreaseProductCount() {\r\n    if (this.productCount > 1) {\r\n      this.productCount--;\r\n    }\r\n\r\n  }\r\n\r\n  incrementProductCount() {\r\n    this.productCount++;\r\n\r\n  }\r\n\r\n  addToCart(product) {\r\n    var productPrice = this.productCount * parseInt(product.price);\r\n    let cartProduct = {\r\n      product_id: product.id,\r\n      name: product.name,\r\n      thumb: product.thumb,\r\n      count: this.productCount,\r\n      totalPrice: productPrice\r\n    };\r\n    this.cartService.addToCart(cartProduct).then((val) => {\r\n      this.presentToast(cartProduct.name);\r\n    });\r\n  }\r\n\r\n\r\n  presentToast(name) {\r\n    let toast = this.toastCtrl.create({\r\n      message: `${name} has been added to cart`,\r\n      showCloseButton: true,\r\n      closeButtonText: 'View Cart'\r\n    });\r\n\r\n    toast.onDidDismiss(() => {\r\n      this.navCtrl.setRoot('TabsPage', { tabIndex: 1 });\r\n      // this.navCtrl.push('CartPage');\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/single/single.ts"],"sourceRoot":""}